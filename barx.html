<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Awesome-pyecharts</title>
    <script type="text/javascript" src="https://assets.pyecharts.org/assets/v5/echarts.min.js"></script>
</head>
<body style="background-color: rgba(240,248,255,0.5)" >
    <!-- 年份柱状图 -->
    <div id="yearChart" class="chart-container" style="width:900px; height:500px;"></div>
    <!-- 月份折线图，初始状态下隐藏 -->
    <div id="monthChart" class="chart-container" style="width:900px; height:500px; margin-top: 50px; display: none;"></div>

    <script>
        // 初始化年份柱状图和月份折线图
        var yearChart = echarts.init(document.getElementById('yearChart'), 'light', {renderer: 'canvas'});
        var monthChart = echarts.init(document.getElementById('monthChart'), 'light', {renderer: 'canvas'});

        // 年份数据定义
        var yearData = [30110.43, 18417.41, 24000, 35000];
        var years = ["2019", "2020", "2021", "2022"];

        // 月份数据定义
        var monthData = {
            "2019": [2000, 1800, 2200, 2600, 2400, 3000, 3500, 3200, 3100, 3300, 2800, 2700],
            "2020": [1500, 1400, 1700, 1800, 2000, 2100, 2300, 2200, 2400, 2600, 2500, 1900],
            "2021": [1600, 1700, 1500, 1800, 1900, 2000, 2100, 2300, 2500, 2600, 2400, 2200],
            "2022": [1400, 1300, 1200, 1500, 1700, 1600, 1800, 1900, 2000, 2100, 2200, 2300]
        };

        // 年份柱状图的配置选项
        var yearOption = {
            title: {
                text: '近几年西安旅游人次',
                left: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: '{b}: {c} 万'
            },
            xAxis: {
                type: 'category',
                data: years
            },
            yAxis: {
                type: 'value',
                name: '人次 (万)'
            },
            series: [{
                type: 'bar',
                name: '旅游人次 (单位：万)',
                data: yearData,
                itemStyle: {
                    color: 'rgba(0,104,139,0.5)',
                    opacity: 0.8
                }
            }]
        };

        // 月份折线图的配置选项
        var monthOption = {
            title: {
                text: '',
                left: 'center'
            },
            tooltip: {
                trigger: 'axis'
            },
            xAxis: {
                type: 'category',
                data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月']
            },
            yAxis: {
                type: 'value',
                name: '人次 (万)'
            },
            series: [{
                type: 'line',
                name: '月度人次',
                data: []
            }]
        };

        // 设置初始选项
        yearChart.setOption(yearOption);

        // 绑定点击事件更新月份折线图并显示
        yearChart.on('click', function (params) {
            var selectedYear = params.name;
            monthOption.title.text = selectedYear + ' 年每月人流量';
            monthOption.series[0].data = monthData[selectedYear];
            monthChart.setOption(monthOption);
            document.getElementById('monthChart').style.display = 'block'; // 显示月份折线图
        });
    </script>
</body>
</html>
